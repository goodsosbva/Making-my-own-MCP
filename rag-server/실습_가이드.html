<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MCP 서버와 RAG 시스템 실습 가이드</title>
    <style>
      body {
        font-family: "Malgun Gothic", Arial, sans-serif;
        line-height: 1.6;
        margin: 40px;
        color: #333;
      }
      .header {
        text-align: center;
        border-bottom: 3px solid #2c3e50;
        padding-bottom: 20px;
        margin-bottom: 30px;
      }
      .section {
        margin-bottom: 30px;
        page-break-inside: avoid;
      }
      .section h2 {
        color: #2c3e50;
        border-left: 5px solid #3498db;
        padding-left: 15px;
        margin-bottom: 20px;
      }
      .code-block {
        background-color: #f8f9fa;
        border: 1px solid #e9ecef;
        border-radius: 5px;
        padding: 15px;
        margin: 15px 0;
        font-family: "Courier New", monospace;
        font-size: 14px;
        overflow-x: auto;
      }
      .highlight {
        background-color: #fff3cd;
        padding: 10px;
        border-left: 4px solid #ffc107;
        margin: 15px 0;
      }
      .warning {
        background-color: #f8d7da;
        padding: 10px;
        border-left: 4px solid #dc3545;
        margin: 15px 0;
      }
      .success {
        background-color: #d4edda;
        padding: 10px;
        border-left: 4px solid #28a745;
        margin: 15px 0;
      }
      table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
      }
      th,
      td {
        border: 1px solid #ddd;
        padding: 12px;
        text-align: left;
      }
      th {
        background-color: #f2f2f2;
        font-weight: bold;
      }
      .page-break {
        page-break-before: always;
      }
    </style>
  </head>
  <body>
    <div class="header">
      <h1>MCP 서버와 RAG 시스템 실습 가이드</h1>
      <p>Model Context Protocol과 Retrieval-Augmented Generation 실습</p>
      <p>작성일: 2024년</p>
    </div>

    <div class="section">
      <h2>1. 실습 개요</h2>
      <p>
        이 실습에서는 MCP(Model Context Protocol) 서버를 구축하고, LangChain을
        활용한 RAG(Retrieval-Augmented Generation) 시스템을 구현합니다.
      </p>

      <h3>1.1 실습 목표</h3>
      <ul>
        <li>MCP 서버의 개념과 구조 이해</li>
        <li>LangChain 프레임워크 활용법 학습</li>
        <li>RAG 시스템 구축 및 활용</li>
        <li>PDF 문서 기반 질문응답 시스템 구현</li>
      </ul>
    </div>

    <div class="section">
      <h2>2. MCP 서버란?</h2>
      <p>
        <strong>MCP(Model Context Protocol)</strong>는 AI 모델과 다양한 도구,
        데이터 소스를 연결하는 표준 프로토콜입니다.
      </p>

      <h3>2.1 MCP의 주요 특징</h3>
      <ul>
        <li>
          <strong>도구 등록</strong>: 다양한 기능을 도구로 등록하여 AI가 활용할
          수 있게 함
        </li>
        <li>
          <strong>프로토콜 표준화</strong>: AI 모델과 도구 간의 통신을 표준화
        </li>
        <li><strong>확장성</strong>: 새로운 도구를 쉽게 추가할 수 있음</li>
        <li><strong>크로스 플랫폼</strong>: 다양한 환경에서 동작</li>
      </ul>

      <h3>2.2 MCP 서버 구조</h3>
      <div class="code-block">
        from mcp.server.fastmcp import FastMCP # MCP 서버 인스턴스 생성 mcp =
        FastMCP("서버이름") # 도구 등록 @mcp.tool() def my_tool(): """도구
        설명""" pass # 서버 실행 if __name__ == "__main__":
        mcp.run(transport="stdio")
      </div>
    </div>

    <div class="section">
      <h2>3. 수학 서버 실습 (math-server)</h2>
      <p>간단한 수학 연산을 수행하는 MCP 서버를 구현했습니다.</p>

      <h3>3.1 구현된 도구들</h3>
      <table>
        <tr>
          <th>도구명</th>
          <th>기능</th>
          <th>입력</th>
          <th>출력</th>
        </tr>
        <tr>
          <td>add</td>
          <td>두 수를 더함</td>
          <td>a, b (정수)</td>
          <td>a + b (정수)</td>
        </tr>
        <tr>
          <td>Subtract</td>
          <td>두 수를 뺌</td>
          <td>a, b (정수)</td>
          <td>a - b (정수)</td>
        </tr>
      </table>

      <h3>3.2 코드 구조</h3>
      <div class="code-block">
        @mcp.tool() def add(a, b) -> int: """더하기""" try: a = int(a) b =
        int(b) logging.info(f"Adding {a} and {b}") return a + b except Exception
        as e: logging.error(f"Invalid input in add: {a}, {b} - {e}") raise
      </div>

      <h3>3.3 사용 예시</h3>
      <div class="success">
        <strong>성공적인 연산 결과:</strong><br />
        • add(12, 4) = 16<br />
        • Subtract(15, 5) = 10
      </div>
    </div>

    <div class="section page-break">
      <h2>4. RAG 시스템 실습 (rag-server)</h2>
      <p>PDF 문서를 기반으로 한 질문응답 시스템을 구현했습니다.</p>

      <h3>4.1 RAG 시스템의 구성 요소</h3>
      <ul>
        <li>
          <strong>문서 로더</strong>: PyPDFLoader를 사용하여 PDF 파일 로드
        </li>
        <li>
          <strong>텍스트 분할</strong>: RecursiveCharacterTextSplitter로 문서를
          청크로 분할
        </li>
        <li>
          <strong>임베딩</strong>: OpenAIEmbeddings로 텍스트를 벡터로 변환
        </li>
        <li>
          <strong>벡터 저장소</strong>: Chroma를 사용하여 벡터 데이터 저장
        </li>
        <li>
          <strong>질문응답 체인</strong>: RetrievalQA로 검색 기반 답변 생성
        </li>
      </ul>

      <h3>4.2 핵심 코드 구조</h3>
      <div class="code-block">
        # PDF 로드 및 분할 loader = PyPDFLoader(PDF_PATH) pages = loader.load()
        splitter = RecursiveCharacterTextSplitter(chunk_size=500,
        chunk_overlap=50) docs = splitter.split_documents(pages) # 임베딩 및
        벡터 저장소 생성 embeddings = OpenAIEmbeddings() vectorstore =
        Chroma.from_documents(docs, embeddings) # RAG 체인 생성 qa_chain =
        RetrievalQA.from_chain_type( llm=llm,
        retriever=vectorstore.as_retriever() )
      </div>

      <h3>4.3 MCP 도구로 등록</h3>
      <div class="code-block">
        @mcp.tool() def ask_pdf(query: str) -> str: """PDF 내용을 기반으로
        질문에 답변합니다.""" logging.info(f"Received query: {query}") return
        qa_chain.run(query)
      </div>
    </div>

    <div class="section">
      <h2>5. LangChain 프레임워크</h2>
      <p>LangChain은 LLM을 활용한 애플리케이션 개발을 위한 프레임워크입니다.</p>

      <h3>5.1 주요 구성 요소</h3>
      <ul>
        <li><strong>LLM</strong>: GPT, Claude 등의 언어 모델</li>
        <li><strong>프롬프트</strong>: AI에게 전달할 지시사항</li>
        <li><strong>체인</strong>: 여러 단계를 연결한 작업 흐름</li>
        <li><strong>메모리</strong>: 대화 기록 및 컨텍스트 저장</li>
        <li><strong>도구</strong>: 외부 API, 데이터베이스 연동</li>
      </ul>

      <h3>5.2 RAG의 작동 원리</h3>
      <ol>
        <li><strong>문서 처리</strong>: PDF를 텍스트로 변환하고 청크로 분할</li>
        <li><strong>벡터화</strong>: 각 청크를 임베딩하여 벡터로 변환</li>
        <li><strong>검색</strong>: 질문과 유사한 벡터를 검색</li>
        <li><strong>생성</strong>: 검색된 정보를 바탕으로 AI가 답변 생성</li>
      </ol>
    </div>

    <div class="section">
      <h2>6. 설정 및 실행</h2>

      <h3>6.1 MCP 설정 파일 (mcp.json)</h3>
      <div class="code-block">
        { "mcpServers": { "math-server": { "command": "C:/Python313/python.exe",
        "args": ["C:/Users/admin/test-server/math-server/math_server.py"] } } }
      </div>

      <h3>6.2 필요한 패키지</h3>
      <div class="code-block">
        # 핵심 패키지 mcp-server-fastmcp langchain langchain-openai
        langchain-community chromadb pypdf
      </div>

      <h3>6.3 환경 변수 설정</h3>
      <div class="warning">
        <strong>주의사항:</strong><br />
        OpenAI API 키를 환경 변수로 설정해야 합니다.<br />
        os.environ["OPENAI_API_KEY"] = "your-api-key-here"
      </div>
    </div>

    <div class="section">
      <h2>7. 실습 결과 및 학습 포인트</h2>

      <h3>7.1 성공적으로 구현된 기능</h3>
      <div class="success">
        <ul>
          <li>MCP 서버를 통한 도구 등록 및 호출</li>
          <li>수학 연산 도구의 정상 작동</li>
          <li>PDF 기반 RAG 시스템 구축</li>
          <li>LangChain과 MCP의 연동</li>
        </ul>
      </div>

      <h3>7.2 학습된 핵심 개념</h3>
      <ul>
        <li><strong>MCP 프로토콜</strong>: AI와 도구 간의 표준화된 통신</li>
        <li><strong>RAG 시스템</strong>: 검색과 생성의 결합</li>
        <li>
          <strong>벡터 데이터베이스</strong>: 의미적 검색을 위한 임베딩 저장
        </li>
        <li><strong>LangChain 체인</strong>: 복잡한 AI 워크플로우 구성</li>
      </ul>

      <h3>7.3 향후 발전 방향</h3>
      <ul>
        <li>더 많은 도구 추가 및 연동</li>
        <li>웹 인터페이스 구축</li>
        <li>다양한 문서 형식 지원</li>
        <li>성능 최적화 및 확장성 개선</li>
      </ul>
    </div>

    <div class="section">
      <h2>8. 문제 해결 및 디버깅</h2>

      <h3>8.1 일반적인 문제들</h3>
      <table>
        <tr>
          <th>문제</th>
          <th>원인</th>
          <th>해결 방법</th>
        </tr>
        <tr>
          <td>MCP 도구가 인식되지 않음</td>
          <td>서버가 실행되지 않음</td>
          <td>MCP 서버 재시작</td>
        </tr>
        <tr>
          <td>API 키 오류</td>
          <td>환경 변수 미설정</td>
          <td>OPENAI_API_KEY 설정</td>
        </tr>
        <tr>
          <td>PDF 파일을 찾을 수 없음</td>
          <td>경로 오류</td>
          <td>PDF_PATH 경로 확인</td>
        </tr>
      </table>

      <h3>8.2 로깅 활용</h3>
      <div class="highlight">
        <strong>로깅 설정:</strong><br />
        logging.basicConfig(level=logging.INFO)<br />
        로그를 통해 실행 과정과 오류를 추적할 수 있습니다.
      </div>
    </div>

    <div class="section">
      <h2>9. 결론</h2>
      <p>
        이 실습을 통해 MCP 서버의 기본 구조와 RAG 시스템의 구현 방법을
        학습했습니다. LangChain 프레임워크를 활용하여 AI 모델과 다양한 도구를
        연동하는 방법을 이해할 수 있었습니다.
      </p>

      <h3>9.1 핵심 성과</h3>
      <ul>
        <li>MCP 프로토콜을 통한 도구 등록 및 관리</li>
        <li>LangChain을 활용한 RAG 시스템 구축</li>
        <li>PDF 문서 기반 질문응답 시스템 구현</li>
        <li>AI 모델과 외부 도구의 연동 방법 습득</li>
      </ul>

      <h3>9.2 실무 적용 가능성</h3>
      <p>
        이번 실습에서 학습한 내용은 문서 검색 시스템, 지능형 챗봇, 자동화 도구
        등 다양한 AI 애플리케이션 개발에 활용할 수 있습니다.
      </p>
    </div>

    <div
      style="
        text-align: center;
        margin-top: 50px;
        border-top: 1px solid #ddd;
        padding-top: 20px;
      "
    >
      <p><strong>MCP 서버와 RAG 시스템 실습 가이드</strong></p>
      <p>작성자: AI 어시스턴트 | 작성일: 2024년</p>
    </div>
  </body>
</html>
